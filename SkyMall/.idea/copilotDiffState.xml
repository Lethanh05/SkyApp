<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/skymall/ui/voucher/VoucherListFragment.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/skymall/ui/voucher/VoucherListFragment.java" />
              <option name="originalContent" value="package com.example.skymall.ui.voucher;&#10;&#10;import android.os.Bundle;&#10;import android.view.*; import android.widget.*;&#10;import androidx.annotation.*; import androidx.fragment.app.Fragment; import androidx.recyclerview.widget.*;&#10;import com.example.skymall.R;&#10;import com.example.skymall.data.model.Voucher;&#10;import com.example.skymall.data.remote.ApiClient;&#10;import com.example.skymall.data.remote.ApiService;&#10;import java.util.*;&#10;import retrofit2.*;&#10;&#10;public class VoucherListFragment extends Fragment {&#10;    private RecyclerView rv; private View emptyView; private androidx.swiperefreshlayout.widget.SwipeRefreshLayout swipe;&#10;    private VoucherAdapter adapter; private ApiService api;&#10;&#10;    @Nullable @Override&#10;    public View onCreateView(@NonNull LayoutInflater inf, @Nullable ViewGroup c, @Nullable Bundle s) {&#10;        View v = inf.inflate(R.layout.fragment_voucher_list, c, false);&#10;        swipe = v.findViewById(R.id.swipe);&#10;        rv = v.findViewById(R.id.rvVouchers);&#10;        emptyView = v.findViewById(R.id.emptyView);&#10;&#10;        rv.setLayoutManager(new LinearLayoutManager(getContext()));&#10;        adapter = new VoucherAdapter();&#10;        adapter.setOnVoucherClickListener(this::applyVoucher);&#10;        rv.setAdapter(adapter);&#10;&#10;        api = ApiClient.create(requireContext());&#10;&#10;        swipe.setOnRefreshListener(this::loadVouchers);&#10;        loadVouchers();&#10;        return v;&#10;    }&#10;&#10;    private void loadVouchers() {&#10;        swipe.setRefreshing(true);&#10;        api.getVouchers(1, 50).enqueue(new retrofit2.Callback&lt;com.example.skymall.data.remote.DTO.VoucherListResp&gt;() {&#10;            @Override&#10;            public void onResponse(retrofit2.Call&lt;com.example.skymall.data.remote.DTO.VoucherListResp&gt; call, retrofit2.Response&lt;com.example.skymall.data.remote.DTO.VoucherListResp&gt; response) {&#10;                swipe.setRefreshing(false);&#10;                android.util.Log.d(&quot;VoucherAPI&quot;, &quot;Response: &quot; + response);&#10;                if (response.isSuccessful() &amp;&amp; response.body() != null) {&#10;                    com.example.skymall.data.remote.DTO.VoucherListResp resp = response.body();&#10;                    android.util.Log.d(&quot;VoucherAPI&quot;, &quot;success: &quot; + resp.success);&#10;                    android.util.Log.d(&quot;VoucherAPI&quot;, &quot;error: &quot; + resp.error);&#10;                    android.util.Log.d(&quot;VoucherAPI&quot;, &quot;message: &quot; + resp.message);&#10;                    if (resp.vouchers != null) {&#10;                        android.util.Log.d(&quot;VoucherAPI&quot;, &quot;vouchers.size: &quot; + resp.vouchers.size());&#10;                        for (int i = 0; i &lt; resp.vouchers.size(); i++) {&#10;                            Voucher v = resp.vouchers.get(i);&#10;                            android.util.Log.d(&quot;VoucherAPI&quot;, &quot;voucher[&quot;+i+&quot;]: id=&quot;+v.id+&quot;, code=&quot;+v.code+&quot;, type=&quot;+v.type+&quot;, value=&quot;+v.value);&#10;                        }&#10;                    } else {&#10;                        android.util.Log.d(&quot;VoucherAPI&quot;, &quot;vouchers is null&quot;);&#10;                    }&#10;                    Toast.makeText(getContext(), &quot;API success: &quot; + resp.success + &quot;, vouchers: &quot; + (resp.vouchers != null ? resp.vouchers.size() : 0), Toast.LENGTH_LONG).show();&#10;                }&#10;                if (response.isSuccessful() &amp;&amp; response.body() != null &amp;&amp; response.body().success) {&#10;                    List&lt;Voucher&gt; vouchers = response.body().vouchers;&#10;                    adapter.setVouchers(vouchers != null ? vouchers : new ArrayList&lt;&gt;());&#10;                    emptyView.setVisibility((vouchers == null || vouchers.isEmpty()) ? View.VISIBLE : View.GONE);&#10;                } else {&#10;                    adapter.setVouchers(new ArrayList&lt;&gt;());&#10;                    emptyView.setVisibility(View.VISIBLE);&#10;                    Toast.makeText(getContext(), &quot;Không lấy được danh sách voucher&quot;, Toast.LENGTH_SHORT).show();&#10;                }&#10;            }&#10;            @Override&#10;            public void onFailure(retrofit2.Call&lt;com.example.skymall.data.remote.DTO.VoucherListResp&gt; call, Throwable t) {&#10;                swipe.setRefreshing(false);&#10;                adapter.setVouchers(new ArrayList&lt;&gt;());&#10;                emptyView.setVisibility(View.VISIBLE);&#10;                Toast.makeText(getContext(), &quot;Lỗi kết nối server&quot;, Toast.LENGTH_SHORT).show();&#10;            }&#10;        });&#10;    }&#10;&#10;    private void applyVoucher(Voucher v) {&#10;        Toast.makeText(getContext(), &quot;Đã chọn: &quot; + v.code, Toast.LENGTH_SHORT).show();&#10;        // TODO: trả về cho giỏ hàng/checkout qua ViewModel/FragmentResult&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.skymall.ui.voucher;&#10;&#10;import android.os.Bundle;&#10;import android.view.*; import android.widget.*;&#10;import androidx.annotation.*; import androidx.fragment.app.Fragment; import androidx.recyclerview.widget.*;&#10;import com.example.skymall.R;&#10;import com.example.skymall.data.model.Voucher;&#10;import com.example.skymall.data.remote.ApiClient;&#10;import com.example.skymall.data.remote.ApiService;&#10;import java.util.*;&#10;import retrofit2.*;&#10;&#10;public class VoucherListFragment extends Fragment {&#10;    private RecyclerView rv; private View emptyView; private androidx.swiperefreshlayout.widget.SwipeRefreshLayout swipe;&#10;    private VoucherAdapter adapter; private ApiService api;&#10;&#10;    @Nullable @Override&#10;    public View onCreateView(@NonNull LayoutInflater inf, @Nullable ViewGroup c, @Nullable Bundle s) {&#10;        View v = inf.inflate(R.layout.fragment_voucher_list, c, false);&#10;        swipe = v.findViewById(R.id.swipe);&#10;        rv = v.findViewById(R.id.rvVouchers);&#10;        emptyView = v.findViewById(R.id.emptyView);&#10;&#10;        rv.setLayoutManager(new LinearLayoutManager(getContext()));&#10;        adapter = new VoucherAdapter();&#10;        adapter.setOnVoucherClickListener(this::applyVoucher);&#10;        rv.setAdapter(adapter);&#10;&#10;        api = ApiClient.create(requireContext());&#10;&#10;        swipe.setOnRefreshListener(this::loadVouchers);&#10;        loadVouchers();&#10;        return v;&#10;    }&#10;&#10;    private void loadVouchers() {&#10;        swipe.setRefreshing(true);&#10;        api.getVouchers(1, 50).enqueue(new retrofit2.Callback&lt;com.example.skymall.data.remote.DTO.VoucherListResp&gt;() {&#10;            @Override&#10;            public void onResponse(retrofit2.Call&lt;com.example.skymall.data.remote.DTO.VoucherListResp&gt; call, retrofit2.Response&lt;com.example.skymall.data.remote.DTO.VoucherListResp&gt; response) {&#10;                swipe.setRefreshing(false);&#10;                if (response.isSuccessful() &amp;&amp; response.body() != null &amp;&amp; response.body().success) {&#10;                    List&lt;Voucher&gt; vouchers = response.body().vouchers;&#10;                    adapter.setVouchers(vouchers != null ? vouchers : new ArrayList&lt;&gt;());&#10;                    emptyView.setVisibility((vouchers == null || vouchers.isEmpty()) ? View.VISIBLE : View.GONE);&#10;                } else {&#10;                    adapter.setVouchers(new ArrayList&lt;&gt;());&#10;                    emptyView.setVisibility(View.VISIBLE);&#10;                    Toast.makeText(getContext(), &quot;Không lấy được danh sách voucher&quot;, Toast.LENGTH_SHORT).show();&#10;                }&#10;            }&#10;            @Override&#10;            public void onFailure(retrofit2.Call&lt;com.example.skymall.data.remote.DTO.VoucherListResp&gt; call, Throwable t) {&#10;                swipe.setRefreshing(false);&#10;                adapter.setVouchers(new ArrayList&lt;&gt;());&#10;                emptyView.setVisibility(View.VISIBLE);&#10;                Toast.makeText(getContext(), &quot;Lỗi kết nối server&quot;, Toast.LENGTH_SHORT).show();&#10;            }&#10;        });&#10;    }&#10;&#10;    private void applyVoucher(Voucher v) {&#10;        Toast.makeText(getContext(), &quot;Đã chọn: &quot; + v.code, Toast.LENGTH_SHORT).show();&#10;        // TODO: trả về cho giỏ hàng/checkout qua ViewModel/FragmentResult&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/drawable/circle_gray.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/drawable/circle_gray.xml" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:shape=&quot;oval&quot;&gt;&#10;    &lt;solid android:color=&quot;#E0E0E0&quot; /&gt;&#10;&lt;/shape&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/drawable/ic_close.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/drawable/ic_close.xml" />
              <option name="updatedContent" value="&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:width=&quot;24dp&quot;&#10;    android:height=&quot;24dp&quot;&#10;    android:viewportWidth=&quot;24&quot;&#10;    android:viewportHeight=&quot;24&quot;&#10;    android:tint=&quot;@android:color/white&quot;&gt;&#10;  &lt;path&#10;      android:fillColor=&quot;@android:color/white&quot;&#10;      android:pathData=&quot;M19,6.41L17.59,5 12,10.59 6.41,5 5,6.41 10.59,12 5,17.59 6.41,19 12,13.41 17.59,19 19,17.59 13.41,12z&quot;/&gt;&#10;&lt;/vector&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/drawable/ic_search.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/drawable/ic_search.xml" />
              <option name="updatedContent" value="&lt;vector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:width=&quot;24dp&quot;&#10;    android:height=&quot;24dp&quot;&#10;    android:viewportWidth=&quot;24&quot;&#10;    android:viewportHeight=&quot;24&quot;&#10;    android:tint=&quot;@android:color/white&quot;&gt;&#10;  &lt;path&#10;      android:fillColor=&quot;@android:color/white&quot;&#10;      android:pathData=&quot;M15.5,14h-0.79l-0.28,-0.27C15.41,12.59 16,11.11 16,9.5 16,5.91 13.09,3 9.5,3S3,5.91 3,9.5 5.91,16 9.5,16c1.61,0 3.09,-0.59 4.23,-1.57l0.27,0.28v0.79l5,4.99L20.49,19l-4.99,-5zM9.5,14C7.01,14 5,11.99 5,9.5S7.01,5 9.5,5 14,7.01 14,9.5 11.99,14 9.5,14z&quot;/&gt;&#10;&lt;/vector&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/layout/dialog_voucher_check.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/layout/dialog_voucher_check.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:layout_height=&quot;wrap_content&quot;&#10;    android:orientation=&quot;vertical&quot;&#10;    android:padding=&quot;16dp&quot;&gt;&#10;&#10;    &lt;TextView&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:text=&quot;Nhập mã voucher để kiểm tra&quot;&#10;        android:textSize=&quot;14sp&quot;&#10;        android:textColor=&quot;@android:color/darker_gray&quot;&#10;        android:layout_marginBottom=&quot;12dp&quot; /&gt;&#10;&#10;    &lt;LinearLayout&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:orientation=&quot;horizontal&quot;&#10;        android:layout_marginBottom=&quot;16dp&quot;&gt;&#10;&#10;        &lt;EditText&#10;            android:id=&quot;@+id/et_voucher_code&quot;&#10;            android:layout_width=&quot;0dp&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:layout_weight=&quot;1&quot;&#10;            android:hint=&quot;Nhập mã voucher&quot;&#10;            android:textAllCaps=&quot;true&quot;&#10;            android:inputType=&quot;textCapCharacters&quot;&#10;            android:maxLength=&quot;20&quot;&#10;            android:background=&quot;@drawable/edit_text_background&quot;&#10;            android:autofillHints=&quot;text&quot;&#10;            android:layout_marginEnd=&quot;8dp&quot; /&gt;&#10;&#10;        &lt;Button&#10;            android:id=&quot;@+id/btn_check&quot;&#10;            android:layout_width=&quot;wrap_content&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:text=&quot;Kiểm tra&quot;&#10;            android:textSize=&quot;12sp&quot;&#10;            android:background=&quot;@drawable/btn_primary_background&quot;&#10;            android:textColor=&quot;@color/white&quot;&#10;            android:minWidth=&quot;80dp&quot; /&gt;&#10;&#10;    &lt;/LinearLayout&gt;&#10;&#10;    &lt;ProgressBar&#10;        android:id=&quot;@+id/progress_bar&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_gravity=&quot;center&quot;&#10;        android:visibility=&quot;gone&quot;&#10;        android:layout_marginBottom=&quot;16dp&quot; /&gt;&#10;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tv_result&quot;&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:textSize=&quot;14sp&quot;&#10;        android:padding=&quot;12dp&quot;&#10;        android:background=&quot;@drawable/notification_read_background&quot;&#10;        android:visibility=&quot;gone&quot;&#10;        android:layout_marginBottom=&quot;16dp&quot; /&gt;&#10;&#10;    &lt;LinearLayout&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:orientation=&quot;horizontal&quot;&#10;        android:style=&quot;?android:attr/buttonBarStyle&quot;&#10;        android:gravity=&quot;end&quot;&gt;&#10;&#10;        &lt;Button&#10;            android:id=&quot;@+id/btn_remove&quot;&#10;            android:layout_width=&quot;wrap_content&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:text=&quot;Bỏ áp dụng&quot;&#10;            android:textColor=&quot;@android:color/holo_red_dark&quot;&#10;            android:style=&quot;?android:attr/buttonBarButtonStyle&quot;&#10;            android:visibility=&quot;gone&quot;&#10;            android:layout_marginEnd=&quot;8dp&quot; /&gt;&#10;&#10;        &lt;Button&#10;            android:id=&quot;@+id/btn_apply&quot;&#10;            android:layout_width=&quot;wrap_content&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:text=&quot;Áp dụng&quot;&#10;            android:textColor=&quot;@color/white&quot;&#10;            android:background=&quot;@drawable/btn_primary_background&quot;&#10;            android:visibility=&quot;gone&quot; /&gt;&#10;&#10;    &lt;/LinearLayout&gt;&#10;&#10;&lt;/LinearLayout&gt;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    android:layout_width=&quot;match_parent&quot;&#10;    android:layout_height=&quot;wrap_content&quot;&#10;    android:orientation=&quot;vertical&quot;&#10;    android:padding=&quot;16dp&quot;&gt;&#10;&#10;    &lt;TextView&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:text=&quot;Nhập mã voucher để kiểm tra&quot;&#10;        android:textSize=&quot;14sp&quot;&#10;        android:textColor=&quot;@android:color/darker_gray&quot;&#10;        android:layout_marginBottom=&quot;12dp&quot; /&gt;&#10;&#10;    &lt;LinearLayout&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:orientation=&quot;horizontal&quot;&#10;        android:layout_marginBottom=&quot;16dp&quot;&gt;&#10;&#10;        &lt;EditText&#10;            android:id=&quot;@+id/et_voucher_code&quot;&#10;            android:layout_width=&quot;0dp&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:layout_weight=&quot;1&quot;&#10;            android:hint=&quot;Nhập mã voucher&quot;&#10;            android:textAllCaps=&quot;true&quot;&#10;            android:inputType=&quot;textCapCharacters&quot;&#10;            android:maxLength=&quot;20&quot;&#10;            android:background=&quot;@drawable/edit_text_background&quot;&#10;            android:autofillHints=&quot;text&quot;&#10;            android:layout_marginEnd=&quot;8dp&quot; /&gt;&#10;&#10;        &lt;Button&#10;            android:id=&quot;@+id/btn_check&quot;&#10;            android:layout_width=&quot;wrap_content&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:text=&quot;Kiểm tra&quot;&#10;            android:textSize=&quot;12sp&quot;&#10;            android:background=&quot;@drawable/btn_primary_background&quot;&#10;            android:textColor=&quot;@color/white&quot;&#10;            android:minWidth=&quot;80dp&quot; /&gt;&#10;&#10;    &lt;/LinearLayout&gt;&#10;&#10;    &lt;ProgressBar&#10;        android:id=&quot;@+id/progress_bar&quot;&#10;        android:layout_width=&quot;wrap_content&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:layout_gravity=&quot;center&quot;&#10;        android:visibility=&quot;gone&quot;&#10;        android:layout_marginBottom=&quot;16dp&quot; /&gt;&#10;&#10;    &lt;TextView&#10;        android:id=&quot;@+id/tv_result&quot;&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:textSize=&quot;14sp&quot;&#10;        android:padding=&quot;12dp&quot;&#10;        android:background=&quot;@drawable/notification_read_background&quot;&#10;        android:visibility=&quot;gone&quot;&#10;        android:layout_marginBottom=&quot;16dp&quot; /&gt;&#10;&#10;    &lt;LinearLayout&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:orientation=&quot;horizontal&quot;&#10;        style=&quot;?android:attr/buttonBarStyle&quot;&#10;        android:gravity=&quot;end&quot;&gt;&#10;&#10;        &lt;Button&#10;            android:id=&quot;@+id/btn_remove&quot;&#10;            android:layout_width=&quot;wrap_content&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:text=&quot;Bỏ áp dụng&quot;&#10;            android:textColor=&quot;@android:color/holo_red_dark&quot;&#10;            style=&quot;?android:attr/buttonBarButtonStyle&quot;&#10;            android:visibility=&quot;gone&quot;&#10;            android:layout_marginEnd=&quot;8dp&quot; /&gt;&#10;&#10;        &lt;Button&#10;            android:id=&quot;@+id/btn_apply&quot;&#10;            android:layout_width=&quot;wrap_content&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:text=&quot;Áp dụng&quot;&#10;            android:textColor=&quot;@color/white&quot;&#10;            android:background=&quot;@drawable/btn_primary_background&quot;&#10;            android:visibility=&quot;gone&quot; /&gt;&#10;&#10;    &lt;/LinearLayout&gt;&#10;&#10;&lt;/LinearLayout&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>